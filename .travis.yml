before_script:
  - mkdir -p build
  - echo "$SWIFT_VERSION.0" > .swift-version
  - swift --version
  - bundle exec xcake make
  - bundle exec pod install

script:
  - Scripts/ci_phases/01_lint_project.sh
  - bundle exec pod lib lint --skip-tests
  - Scripts/ci_phases/02_run_tests_macos.sh
  - travis_retry Scripts/ci_phases/03_run_tests_ios.sh
  - swift build -Xswiftc -swift-version -Xswiftc $SWIFT_VERSION
  - swift test -Xswiftc -swift-version -Xswiftc $SWIFT_VERSION -Xswiftc '-DDEBUG'

matrix:
  include:
    - os: osx
      language: objective-c
      osx_image: xcode10
      env:
        - SWIFT_VERSION=4
    - os: osx
      language: objective-c
      osx_image: xcode10.1
      env:
        - SWIFT_VERSION=4        